{
  "send": {
    "learner_id": {
      "type": "string (UUID)",
      "required": true,
      "description": "Learner identifier"
    },
    "learner_name": {
      "type": "string",
      "required": true,
      "description": "Learner name"
    },
    "course_id": {
      "type": "string (UUID)",
      "required": true,
      "description": "Course identifier"
    },
    "course_name": {
      "type": "string",
      "required": true,
      "description": "Course name"
    },
    "coverage_map": {
      "type": "array<object>",
      "required": true,
      "description": "Coverage map array",
      "items": {
        "lesson_id": {
          "type": "string (UUID)",
          "required": true
        },
        "skills": {
          "type": "array<string>",
          "required": true
        }
      }
    }
  },
  "receive": {
    "learner_id": {
      "type": "string (UUID)",
      "required": true,
      "description": "Learner identifier"
    },
    "course_id": {
      "type": "string (UUID)",
      "required": true,
      "description": "Course identifier"
    },
    "course_name": {
      "type": "string",
      "required": true,
      "description": "Course name"
    },
    "exam_type": {
      "type": "string",
      "required": true,
      "description": "Type of exam (e.g., 'postcourse')",
      "default": "postcourse"
    },
    "passing_grade": {
      "type": "number",
      "required": true,
      "description": "Passing grade threshold",
      "default": 70.00
    },
    "final_grade": {
      "type": "number",
      "required": false,
      "description": "Final grade achieved by learner"
    },
    "passed": {
      "type": "boolean",
      "required": false,
      "description": "Whether learner passed the assessment"
    }
  },
  "source": {
    "send": {
      "learner_id": "registrations.learner_id or assessments.learner_id",
      "learner_name": "registrations.learner_name or assessments.learner_name",
      "course_id": "courses.id",
      "course_name": "courses.course_name",
      "coverage_map": "DERIVED from lessons array (lessons.id, lessons.skills)"
    },
    "receive": {
      "learner_id": "assessments.learner_id",
      "course_id": "assessments.course_id",
      "course_name": "courses.course_name (lookup)",
      "exam_type": "assessments.exam_type",
      "passing_grade": "assessments.passing_grade",
      "final_grade": "assessments.final_grade",
      "passed": "assessments.passed"
    }
  },
  "derived": {
    "send": {
      "coverage_map": "Built dynamically from lessons array: [{ lesson_id: lesson.id, skills: lesson.skills }]"
    },
    "receive": {}
  },
  "validation": {
    "send": {
      "learner_id": {
        "type": "string",
        "format": "uuid",
        "required": true
      },
      "learner_name": {
        "type": "string",
        "minLength": 1,
        "required": true
      },
      "course_id": {
        "type": "string",
        "format": "uuid",
        "required": true
      },
      "course_name": {
        "type": "string",
        "minLength": 1,
        "required": true
      },
      "coverage_map": {
        "type": "array",
        "minItems": 0,
        "items": {
          "type": "object",
          "required": ["lesson_id", "skills"],
          "properties": {
            "lesson_id": {
              "type": "string",
              "format": "uuid"
            },
            "skills": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        },
        "required": true
      }
    },
    "receive": {
      "learner_id": {
        "type": "string",
        "format": "uuid",
        "required": true
      },
      "course_id": {
        "type": "string",
        "format": "uuid",
        "required": true
      },
      "course_name": {
        "type": "string",
        "minLength": 1,
        "required": true
      },
      "exam_type": {
        "type": "string",
        "enum": ["postcourse"],
        "default": "postcourse",
        "required": true
      },
      "passing_grade": {
        "type": "number",
        "minimum": 0,
        "maximum": 100,
        "default": 70.00,
        "required": true
      },
      "final_grade": {
        "type": "number",
        "minimum": 0,
        "maximum": 100,
        "required": false
      },
      "passed": {
        "type": "boolean",
        "required": false
      }
    }
  },
  "examples": {
    "minimal": {
      "send": {
        "learner_id": "11111111-1111-1111-1111-111111111111",
        "learner_name": "John Doe",
        "course_id": "22222222-2222-2222-2222-222222222222",
        "course_name": "Intro to React",
        "coverage_map": [
          {
            "lesson_id": "33333333-3333-3333-3333-333333333333",
            "skills": ["react", "jsx"]
          }
        ]
      },
      "receive": {
        "learner_id": "11111111-1111-1111-1111-111111111111",
        "course_id": "22222222-2222-2222-2222-222222222222",
        "course_name": "Intro to React",
        "exam_type": "postcourse",
        "passing_grade": 70.00,
        "final_grade": 85.5,
        "passed": true
      }
    },
    "full": {
      "send": {
        "learner_id": "11111111-1111-1111-1111-111111111111",
        "learner_name": "John Doe",
        "course_id": "22222222-2222-2222-2222-222222222222",
        "course_name": "Advanced React Development",
        "coverage_map": [
          {
            "lesson_id": "33333333-3333-3333-3333-333333333333",
            "skills": ["react", "hooks", "context"]
          },
          {
            "lesson_id": "44444444-4444-4444-4444-444444444444",
            "skills": ["react", "performance", "memoization"]
          },
          {
            "lesson_id": "55555555-5555-5555-5555-555555555555",
            "skills": ["react", "testing", "jest"]
          }
        ]
      },
      "receive": {
        "learner_id": "11111111-1111-1111-1111-111111111111",
        "course_id": "22222222-2222-2222-2222-222222222222",
        "course_name": "Advanced React Development",
        "exam_type": "postcourse",
        "passing_grade": 70.00,
        "final_grade": 92.5,
        "passed": true
      }
    }
  }
}


