{
  "migrationFile": {
    "version": "1.0.0",
    "description": "Course Builder is the structural orchestration microservice responsible for generating full course structures based on approved learning paths and learner context. It is triggered by Learner AI, which provides the finalized learning path along with learner identity, organizational context, and competency targets. Course Builder does NOT generate educational content itself and does NOT decide learning paths. Instead, it forwards the received learning path to Content Studio to generate lesson content, then organizes the returned content into a structured hierarchy (Course → Topic → Module → Lesson), applies metadata, manages versions, and stores the complete structured course in the database. Course Builder also manages learner registrations and feedback internally, generates skill-coverage maps for downstream Assessment services, and exposes read-optimized DTOs for other consuming microservices.",
    "database": {
      "tables": [
        {
          "name": "courses",
          "schema": {
            "id": "uuid",
            "course_name": "string",
            "course_description": "string",
            "course_type": "string",
            "status": "string",
            "level": "string",
            "duration_hours": "integer",
            "start_date": "timestamp",
            "created_at": "timestamp",
            "updated_at": "timestamp",
            "created_by_user_id": "uuid",
            "learning_path_designation": "jsonb",
            "studentsIDDictionary": "jsonb",
            "feedbackDictionary": "jsonb",
            "lesson_completion_dictionary": "jsonb",
            "ai_assets": "jsonb"
          }
        },
        {
          "name": "topics",
          "schema": {
            "id": "uuid",
            "course_id": "uuid",
            "topic_name": "string",
            "topic_description": "string"
          }
        },
        {
          "name": "modules",
          "schema": {
            "id": "uuid",
            "topic_id": "uuid",
            "module_name": "string",
            "module_description": "string"
          }
        },
        {
          "name": "lessons",
          "schema": {
            "id": "uuid",
            "module_id": "uuid",
            "topic_id": "uuid",
            "lesson_name": "string",
            "lesson_description": "string",
            "skills": "jsonb",
            "trainer_ids": "uuid[]",
            "content_type": "string",
            "content_data": "jsonb",
            "devlab_exercises": "jsonb",
            "format_order": "jsonb"
          }
        },
        {
          "name": "assessments",
          "schema": {
            "id": "uuid",
            "learner_id": "uuid",
            "learner_name": "string",
            "course_id": "uuid",
            "exam_type": "string",
            "passing_grade": "decimal",
            "final_grade": "decimal",
            "passed": "boolean"
          }
        },
        {
          "name": "feedback",
          "schema": {
            "id": "uuid",
            "learner_id": "uuid",
            "course_id": "uuid",
            "rating": "integer",
            "comment": "string",
            "submitted_at": "timestamp"
          }
        },
        {
          "name": "registrations",
          "schema": {
            "id": "uuid",
            "learner_id": "uuid",
            "learner_name": "string",
            "course_id": "uuid",
            "company_id": "uuid",
            "company_name": "string",
            "status": "string",
            "enrolled_date": "timestamp",
            "completed_date": "timestamp"
          }
        },
        {
          "name": "versions",
          "schema": {
            "id": "uuid",
            "entity_type": "string",
            "entity_id": "uuid",
            "version_number": "integer",
            "data": "jsonb",
            "created_at": "timestamp"
          }
        }
      ],
      "migrations": []
    },
    "api": {
      "endpoints": [
        {
          "path": "/api/fill-content-metrics",
          "method": "POST",
          "description": "Unified endpoint for all microservice integrations using envelope structure (requester_service, payload, response)",
          "requestSchema": {
            "required": ["requester_service", "payload"],
            "properties": {
              "requester_service": {
                "type": "string"
              },
              "payload": {
                "type": "object",
                "required": ["action", "description"],
                "properties": {
                  "action": {
                    "type": "string",
                    "description": "What the request does (without the target service)"
                  },
                  "description": {
                    "type": "string",
                    "description": "Description of the request"
                  }
                }
              },
              "response": {
                "type": "object"
              }
            }
          },
          "responseSchema": {
            "properties": {
              "requester_service": {
                "type": "string"
              },
              "payload": {
                "type": "object"
              },
              "response": {
                "type": "object"
              }
            }
          }
        }
      ]
    },
    "dependencies": [
      "coordinator",
      "learner_ai",
      "content_studio",
      "assessment",
      "directory",
      "learning_analytics",
      "management_reporting"
    ],
    "capabilities": [
      "course management",
      "lesson management",
      "course generation",
      "learner registration",
      "feedback collection",
      "course analytics",
      "AI-powered content generation",
      "microservice integration",
      "personalized learning paths",
      "course content creation",
      "assessment integration",
      "learning analytics",
      "course versioning"
    ],
    "events": {
      "publishes": [
        "course.created",
        "course.updated",
        "course.published",
        "course.scheduled",
        "course.unpublished",
        "registration.completed",
        "registration.cancelled",
        "feedback.submitted",
        "feedback.updated",
        "feedback.deleted",
        "lesson.completed",
        "progress.updated",
        "assessment.completed",
        "course.validated"
      ],
      "subscribes": []
    }
  }
}
